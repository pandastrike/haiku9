"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handler = void 0;

require("source-map-support/register");

var _url = require("url");

var _environment = _interopRequireDefault(require("./environment"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Generated by CoffeeScript 2.4.1
var handler;
exports.handler = handler;

exports.handler = handler = function (event, context, callback) {
  var primaryURL, request;
  ({
    request
  } = event.Records[0].cf);
  primaryURL = (0, _url.resolve)(_environment.default.url, request.uri);
  callback(null, {
    status: "301",
    statusDescription: "301 Moved Permanently",
    body: toJSON({
      error: "301 Moved Permanently"
    }),
    bodyEncoding: "text",
    headers: {
      "access-control-allow-origin": [{
        key: "Access-Control-Allow-Origin",
        value: "*"
      }],
      "content-type": [{
        key: "Content-Type",
        value: "application/json"
      }],
      "location": [{
        key: "Location",
        value: primaryURL
      }]
    }
  });
  return callback(null, request);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7OztBQUZBLElBQUEsT0FBQTs7O0FBSUEsa0JBQUEsT0FBQSxHQUFVLFVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUE7QUFDUixNQUFBLFVBQUEsRUFBQSxPQUFBO0FBQUEsR0FBQTtBQUFBLElBQUE7QUFBQSxNQUFZLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxFQUFaLEVBQUE7QUFFQSxFQUFBLFVBQUEsR0FBYSxrQkFBUSxxQkFBUixHQUFBLEVBQXlCLE9BQU8sQ0FBaEMsR0FBQSxDQUFiO0FBRUEsRUFBQSxRQUFBLENBQUEsSUFBQSxFQUNFO0FBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQTtBQUNBLElBQUEsaUJBQUEsRUFEQSx1QkFBQTtBQUVBLElBQUEsSUFBQSxFQUFNLE1BQUEsQ0FBTztBQUFBLE1BQUEsS0FBQSxFQUFPO0FBQVAsS0FBUCxDQUZOO0FBR0EsSUFBQSxZQUFBLEVBSEEsTUFBQTtBQUlBLElBQUEsT0FBQSxFQUNFO0FBQUEscUNBQStCLENBQzdCO0FBQUEsUUFBQSxHQUFBLEVBQUEsNkJBQUE7QUFDQSxRQUFBLEtBQUEsRUFBTztBQURQLE9BRDZCLENBQS9CO0FBSUEsc0JBQWdCLENBQ1o7QUFBQSxRQUFBLEdBQUEsRUFBQSxjQUFBO0FBQ0EsUUFBQSxLQUFBLEVBQU87QUFEUCxPQURZLENBSmhCO0FBUUEsa0JBQVksQ0FDUjtBQUFBLFFBQUEsR0FBQSxFQUFBLFVBQUE7QUFDQSxRQUFBLEtBQUEsRUFBTztBQURQLE9BRFE7QUFSWjtBQUxGLEdBREYsQ0FBQTtTQW9CQSxRQUFBLENBQUEsSUFBQSxFQUFBLE9BQUEsQztBQXpCUSxDQUFWIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwic291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyXCJcbmltcG9ydCB7cmVzb2x2ZX0gZnJvbSBcInVybFwiXG5pbXBvcnQgZW52aXJvbm1lbnQgZnJvbSBcIi4vZW52aXJvbm1lbnRcIlxuXG5oYW5kbGVyID0gKGV2ZW50LCBjb250ZXh0LCBjYWxsYmFjaykgLT5cbiAge3JlcXVlc3R9ID0gZXZlbnQuUmVjb3Jkc1swXS5jZlxuXG4gIHByaW1hcnlVUkwgPSByZXNvbHZlIGVudmlyb25tZW50LnVybCwgcmVxdWVzdC51cmlcblxuICBjYWxsYmFjayBudWxsLFxuICAgIHN0YXR1czogXCIzMDFcIixcbiAgICBzdGF0dXNEZXNjcmlwdGlvbjogXCIzMDEgTW92ZWQgUGVybWFuZW50bHlcIlxuICAgIGJvZHk6IHRvSlNPTiBlcnJvcjogXCIzMDEgTW92ZWQgUGVybWFuZW50bHlcIlxuICAgIGJvZHlFbmNvZGluZzogXCJ0ZXh0XCJcbiAgICBoZWFkZXJzOlxuICAgICAgXCJhY2Nlc3MtY29udHJvbC1hbGxvdy1vcmlnaW5cIjogW1xuICAgICAgICBrZXk6IFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCJcbiAgICAgICAgdmFsdWU6IFwiKlwiXG4gICAgICBdXG4gICAgICBcImNvbnRlbnQtdHlwZVwiOiBbXG4gICAgICAgICAga2V5OiBcIkNvbnRlbnQtVHlwZVwiXG4gICAgICAgICAgdmFsdWU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICBdXG4gICAgICBcImxvY2F0aW9uXCI6IFtcbiAgICAgICAgICBrZXk6IFwiTG9jYXRpb25cIlxuICAgICAgICAgIHZhbHVlOiBwcmltYXJ5VVJMXG4gICAgICBdXG5cblxuICBjYWxsYmFjayBudWxsLCByZXF1ZXN0XG5cbmV4cG9ydCB7aGFuZGxlcn1cbiJdLCJzb3VyY2VSb290IjoiLi4ifQ==
//# sourceURL=/Users/david/repos/haiku9/edge-lambdas/secondary/origin-request/src/index.coffee