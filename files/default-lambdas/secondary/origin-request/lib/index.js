"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handler = void 0;

require("source-map-support/register");

var _url = require("url");

var _environment = _interopRequireDefault(require("./environment"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Generated by CoffeeScript 2.4.1
var handler;
exports.handler = handler;

exports.handler = handler = function (event, context, callback) {
  var primaryURL, request;
  ({
    request
  } = event.Records[0].cf);
  primaryURL = (0, _url.resolve)(_environment.default.url, request.uri);
  callback(null, {
    status: "301",
    statusDescription: "301 Moved Permanently",
    body: JSON.stringify({
      error: "301 Moved Permanently"
    }),
    bodyEncoding: "text",
    headers: {
      "access-control-allow-origin": [{
        key: "Access-Control-Allow-Origin",
        value: "*"
      }],
      "content-type": [{
        key: "Content-Type",
        value: "application/json"
      }],
      "location": [{
        key: "Location",
        value: primaryURL
      }]
    }
  });
  return callback(null, request);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7OztBQUZBLElBQUEsT0FBQTs7O0FBSUEsa0JBQUEsT0FBQSxHQUFVLFVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUE7QUFDUixNQUFBLFVBQUEsRUFBQSxPQUFBO0FBQUEsR0FBQTtBQUFBLElBQUE7QUFBQSxNQUFZLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxFQUFaLEVBQUE7QUFFQSxFQUFBLFVBQUEsR0FBYSxrQkFBUSxxQkFBUixHQUFBLEVBQXlCLE9BQU8sQ0FBaEMsR0FBQSxDQUFiO0FBRUEsRUFBQSxRQUFBLENBQUEsSUFBQSxFQUNFO0FBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQTtBQUNBLElBQUEsaUJBQUEsRUFEQSx1QkFBQTtBQUVBLElBQUEsSUFBQSxFQUFNLElBQUksQ0FBSixTQUFBLENBQWU7QUFBQSxNQUFBLEtBQUEsRUFBTztBQUFQLEtBQWYsQ0FGTjtBQUdBLElBQUEsWUFBQSxFQUhBLE1BQUE7QUFJQSxJQUFBLE9BQUEsRUFDRTtBQUFBLHFDQUErQixDQUM3QjtBQUFBLFFBQUEsR0FBQSxFQUFBLDZCQUFBO0FBQ0EsUUFBQSxLQUFBLEVBQU87QUFEUCxPQUQ2QixDQUEvQjtBQUlBLHNCQUFnQixDQUNaO0FBQUEsUUFBQSxHQUFBLEVBQUEsY0FBQTtBQUNBLFFBQUEsS0FBQSxFQUFPO0FBRFAsT0FEWSxDQUpoQjtBQVFBLGtCQUFZLENBQ1I7QUFBQSxRQUFBLEdBQUEsRUFBQSxVQUFBO0FBQ0EsUUFBQSxLQUFBLEVBQU87QUFEUCxPQURRO0FBUlo7QUFMRixHQURGLENBQUE7U0FvQkEsUUFBQSxDQUFBLElBQUEsRUFBQSxPQUFBLEM7QUF6QlEsQ0FBViIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcInNvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlclwiXG5pbXBvcnQge3Jlc29sdmV9IGZyb20gXCJ1cmxcIlxuaW1wb3J0IGVudmlyb25tZW50IGZyb20gXCIuL2Vudmlyb25tZW50XCJcblxuaGFuZGxlciA9IChldmVudCwgY29udGV4dCwgY2FsbGJhY2spIC0+XG4gIHtyZXF1ZXN0fSA9IGV2ZW50LlJlY29yZHNbMF0uY2ZcblxuICBwcmltYXJ5VVJMID0gcmVzb2x2ZSBlbnZpcm9ubWVudC51cmwsIHJlcXVlc3QudXJpXG5cbiAgY2FsbGJhY2sgbnVsbCxcbiAgICBzdGF0dXM6IFwiMzAxXCIsXG4gICAgc3RhdHVzRGVzY3JpcHRpb246IFwiMzAxIE1vdmVkIFBlcm1hbmVudGx5XCJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSBlcnJvcjogXCIzMDEgTW92ZWQgUGVybWFuZW50bHlcIlxuICAgIGJvZHlFbmNvZGluZzogXCJ0ZXh0XCJcbiAgICBoZWFkZXJzOlxuICAgICAgXCJhY2Nlc3MtY29udHJvbC1hbGxvdy1vcmlnaW5cIjogW1xuICAgICAgICBrZXk6IFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCJcbiAgICAgICAgdmFsdWU6IFwiKlwiXG4gICAgICBdXG4gICAgICBcImNvbnRlbnQtdHlwZVwiOiBbXG4gICAgICAgICAga2V5OiBcIkNvbnRlbnQtVHlwZVwiXG4gICAgICAgICAgdmFsdWU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICBdXG4gICAgICBcImxvY2F0aW9uXCI6IFtcbiAgICAgICAgICBrZXk6IFwiTG9jYXRpb25cIlxuICAgICAgICAgIHZhbHVlOiBwcmltYXJ5VVJMXG4gICAgICBdXG5cblxuICBjYWxsYmFjayBudWxsLCByZXF1ZXN0XG5cbmV4cG9ydCB7aGFuZGxlcn1cbiJdLCJzb3VyY2VSb290IjoiLi4ifQ==
//# sourceURL=/Users/david/repos/haiku9/edge-lambdas/secondary/origin-request/src/index.coffee